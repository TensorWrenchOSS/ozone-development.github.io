<!DOCTYPE html>
<html>
  <head>
    <title>OZP IWC Debugger</title>
		<link rel="stylesheet" type="text/css" href="css/debugger.css">
		<link rel="stylesheet" href="bootstrap-3.1.1/css/bootstrap.min.css">

		<script src="../../js/ozpIwc-bus.js"></script>
		<script type="text/javascript">
			ozpIwc.defaultLeaderPriority=100;
		</script>
		
		<script src="../../js/bus/defaultWiring.js"></script>

		<script src="js/jquery-2.1.0.min.js"></script>
		<script src="bootstrap-3.1.1/js/bootstrap.min.js"></script>
		<script src="js/debugger.js"></script>
  </head>
  <body>
	<ul class="nav nav-tabs">
		<li class="active"><a href="#topologyTab" data-toggle="tab">Topology</a></li>
		<li><a href="#snooperTab" data-toggle="tab">Traffic</a></li>
		<li><a href="#metricsTab" data-toggle="tab">Metrics</a></li>
		<li><a href="#keyValueTab" data-toggle="tab">KeyValue API</a></li>
		<li><a href="#leaderInfoTab" data-toggle="tab">Leadership Groups</a></li>
		<li><a href="#localStorageTab" data-toggle="tab">LocalStorage</a></li>
		<li class="disabled"><a href="#unusedTab" data-toggle="tab">Address: <span id="debuggerAddress"></span></a></li>
	</ul>

	<div class="tab-content">
		<div id="topologyTab" class="tab-pane active">
			<button onclick="topologyMap.refresh();">Refresh</button>
			<table id="topologyTable">
				<thead><tr>
						<td>Router</td>
						<td>Participants</td>
				</tr></thead>
				<tr class="routerRow routerMulticast"><td class="RouterKey">Multicast</td>
					<td class="routerValue"><table class="participantTable"><thead><tr>
					 <td>Address</td>
					 <td>Type</td>
					 <td>Members</td>
					</tr></thead></table></td>
			</table>
		</div>
		<div id="snooperTab" class="tab-pane">
			<button id="togglePacketCapture" onclick="togglePacketCapture();">Start Capture</button>
			<button id="clearPacketCapture" onclick="clearPacketCapture();">Clear</button>
			Filter: <input id="packetCaptureFilter" type="text" style="width:75%"></input>
			<div id="packetLogToggles"></div>
			<table id="messages">
				<thead><tr>
					<td class="dateString">Time</td>
				  <td class="srcPeer">Src Peer</td>
				  <td class="sequence">Sequence</td>
				  <td class="dst">Destination</td>
				  <td class="src">Source</td>
				  <td class="msgId">Message ID</td>
				  <td class="replyTo">Reply To</td>
				  <td class="action">Action</td>
				  <td class="resource">Resource</td>
				  <td class="contentType">Content Type</td>
				</tr></thead>
				<tbody></tbody>
			</table>
		</div>
		<div id="metricsTab" class="tab-pane">
			<button id="toggleUpdateMetrics" onclick="toggleUpdateMetrics();">Enable Update</button>
			<pre id="stats"></pre>
		</div>
		<div id="keyValueTab" class="tab-pane">
			<button id="kvRefresh" onclick="refreshKV();">Refresh</button>
			<table id="keyValueTable">
				<thead><tr>
					<td class="kvKey">Key</td>
				  <td class="kvValue">Value</td>
				  <td class="kvWatchers">Watchers</td>
				</tr></thead>
			</table>
		</div>
		<div id="leaderInfoTab" class="tab-pane">
			<table>
				<thead><tr>
						<td>LeaderGroup</td>
						<td>Last Election</td>
						<td>Current Leader</td>
						<td>Known Members</td>
						<td>Last Sync</td>
						<td>History</td>
					</tr></thead>
			</table>
		</div>
		<div id="localStorageTab" class="tab-pane">
			<button onclick="drawLocalStorage();">Refresh</button>
			<button style="margin-left: 150px" onclick="wipeLocalStorage();">Wipe Local Storage</button>
			<table>
				<thead><tr>
						<td>Key</td>
						<td>Value</td>
					</tr></thead>
			</table>
		</div>
	</div>
  </body>
</html>
